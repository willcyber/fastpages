---
title: API
layout: default
description: API test
permalink: /api
tags: [javascript]
---

<table>
  <thead>
  <tr>
    <th>Type of Weather</th>
    <th>Description</th>
    <th>City Names</th>
    <!-- <th>Active Cases</th> -->
  </tr>
  </thead>
  <tbody>
    <td id=${weatherData.weather[0].main}></td>
    <td id=${weatherData.weather[0].description.toUpperCase()}></td>
    <td id=${weatherData.name}></td>
    <!-- <td id="active_cases"></td> -->
  </tbody>
</table>
<!-- 
<table>
  <thead>
  <tr>
    <th>Country</th>
    <th>All-time Cases</th>
    <th>Recorded Deaths</th>
    <th>Active Cases</th>
  </tr>
  </thead>
  <tbody id="result">
    <!-- generated rows -->
  </tbody>
</table> -->

<!-- Script is layed out in a sequence (no function) and will execute when page is loaded -->
<script>
  const RAPIDAPI_KEY = import.meta.env.VITE_RAPIDAPI_KEY;
const WEATHER_URL = "https://open-weather-map27.p.rapidapi.com/weather";
const WEATHER_HOST = "open-weather-map27.p.rapidapi.com";

const getData = async (url, host) => {
    const response = await fetch(url, {
        method: "GET",
        headers: {
            accept: "application/json",
            "x-rapidapi-key": RAPIDAPI_KEY,
            "x-rapidapi-host": host,
        },
    });

    if (!response. ok) {
    throw new Error('HTTP error! status: ${response.status} ');
    }
    return await response.json();
};

const runApiQueries = async () => {
    const app = document.getElementById("app");
    //GET CITY NAME
    const geoData = await getData(GEOLOCATION_URL, GEOLOCATION_HOST);
    console.log(geoData);
    //GET WEATHER DATA BY CITY
    const weatherData = await getData(
        WEATHER_URL + geoData.city.name,
        WEATHER_HOST
    );
    console.log(weatherData);
};

runApiQueries();
</script>
